(this["webpackJsonpjwt-boilerplate"]=this["webpackJsonpjwt-boilerplate"]||[]).push([[0],{146:function(e,t,n){},147:function(e,t,n){},150:function(e,t,n){},161:function(e,t,n){},162:function(e,t,n){},163:function(e,t,n){},164:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(54),c=n.n(r),o=(n(145),n(146),n(18)),s=n(10),i=(n(147),n(34)),l=n.n(i),j=n(61),u=n(40),b=n(35),h=n(2);function d(e){return Object(h.jsx)("span",{className:"error",children:e.error})}var p=n(179),O=n(176),m=n(181),x=n(178);function f(){var e=localStorage.getItem("token");e&&(JSON.parse(atob(e.split(".")[1])).exp<Date.now()/1e3&&(localStorage.removeItem("token"),e=null));return e}var g={setToken:function(e){e?localStorage.setItem("token",e):localStorage.removeItem("token")},getToken:f,removeToken:function(){localStorage.removeItem("token")},getUserFromToken:function(){var e=f();return e?JSON.parse(atob(e.split(".")[1])).user:null}},v="/api/users/";var y={signup:function(e){return fetch(v+"signup",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(e)}).then((function(e){if(e.ok)return e.json();throw new Error("Email already taken!")})).then((function(e){var t=e.token;return g.setToken(t)}))},getUser:function(){return g.getUserFromToken()},logout:function(){g.removeToken()},login:function(e){return fetch(v+"login",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(e)}).then((function(e){if(e.ok)return e.json();throw new Error("Bad Credentials!")})).then((function(e){var t=e.token;return g.setToken(t)}))},getProfile:function(e){return fetch(v+e,{headers:{Authorization:"Bearer "+g.getToken()}}).then((function(e){if(e.ok)return e.json();throw new Error("Bad Credentials")}))}};n(150);function k(e){var t=Object(a.useState)(""),n=Object(o.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)({username:"",email:"",password:"",passwordConf:""}),f=Object(o.a)(i,2),g=f[0],v=f[1],k=Object(s.g)();function w(e){v(Object(b.a)(Object(b.a)({},g),{},Object(u.a)({},e.target.name,e.target.value)))}function S(){return(S=Object(j.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,y.signup(g);case 4:e.handleSignUpOrLogin(),k.push("/"),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0.message),c(t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})))).apply(this,arguments)}return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(p.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle",children:Object(h.jsx)(p.a.Column,{style:{maxWidth:450},children:Object(h.jsxs)(O.a,{autoComplete:"off",onSubmit:function(e){return S.apply(this,arguments)},children:[Object(h.jsxs)(m.a,{stacked:!0,children:[Object(h.jsx)(O.a.Input,{name:"firstName",placeholder:"firstname",value:g.firstName,onChange:w,required:!0}),Object(h.jsx)(O.a.Input,{name:"lastName",placeholder:"lastName",value:g.lastName,onChange:w,required:!0}),Object(h.jsx)(O.a.Input,{name:"username",placeholder:"username",value:g.username,onChange:w,required:!0}),Object(h.jsx)(O.a.Input,{type:"email",name:"email",placeholder:"email",value:g.email,onChange:w,required:!0}),Object(h.jsx)(O.a.Input,{name:"password",type:"password",placeholder:"password",value:g.password,onChange:w,required:!0}),Object(h.jsx)(O.a.Input,{name:"passwordConf",type:"password",placeholder:"Confirm Password",value:g.passwordConf,onChange:w,required:!0}),Object(h.jsx)(x.a,{type:"submit",className:"btn",children:"Signup"})]}),r?Object(h.jsx)(d,{error:r}):null]})})})})}n(161);var w=n(26),S=n(182),C=n(177);function T(e){var t=Object(a.useState)(""),n=Object(o.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)({email:"",password:""}),f=Object(o.a)(i,2),g=f[0],v=f[1],k=Object(s.g)();function T(e){v(Object(b.a)(Object(b.a)({},g),{},Object(u.a)({},e.target.name,e.target.value)))}function N(){return(N=Object(j.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,y.login(g);case 4:e.handleSignUpOrLogin(),k.push("/"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),c(t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))).apply(this,arguments)}return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(p.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle",children:Object(h.jsxs)(p.a.Column,{style:{maxWidth:450},children:[Object(h.jsx)(S.a,{as:"h2",color:"teal",textAlign:"center",children:"Log-in to your account"}),Object(h.jsx)(O.a,{autoComplete:"off",onSubmit:function(e){return N.apply(this,arguments)},children:Object(h.jsxs)(m.a,{stacked:!0,children:[Object(h.jsx)(O.a.Input,{type:"email",name:"email",placeholder:"email",value:g.email,onChange:T,required:!0}),Object(h.jsx)(O.a.Input,{name:"password",type:"password",placeholder:"password",value:g.password,onChange:T,required:!0}),Object(h.jsx)(x.a,{color:"teal",fluid:!0,size:"large",type:"submit",className:"btn",children:"Login"})]})}),Object(h.jsxs)(C.a,{children:["New to us? ",Object(h.jsx)(w.b,{to:"/signup",children:"Sign Up"})]}),r?Object(h.jsx)(d,{error:r}):null]})})})}n(162);function N(e){var t=Object(a.useState)({jobTitle:"",location:""}),n=Object(o.a)(t,2),r=n[0],c=n[1],s=function(e){c(Object(b.a)(Object(b.a)({},r),{},Object(u.a)({},e.target.name,e.target.value)))};return Object(h.jsxs)("form",{autoComplete:"off",onSubmit:function(t){t.preventDefault(),e.handleFormSubmit(r.jobTitle,r.location)},children:[Object(h.jsx)("input",{class:"search",name:"jobTitle",placeholder:"...Job Title",value:r.jobTitle,onChange:s}),Object(h.jsx)("input",{class:"search",name:"location",placeholder:"...Location",value:r.location,onChange:s}),Object(h.jsx)("button",{class:"find-btn",type:"submit",children:"FIND"})]})}function _(e){var t=e.handleLogout;return Object(h.jsx)("nav",{class:"nav",children:Object(h.jsxs)("ul",{children:[Object(h.jsx)(w.b,{to:"/",children:Object(h.jsx)("h3",{class:"hiring-lab",children:"The Hiring Lab"})}),Object(h.jsx)(w.b,{to:"/myprofile",class:"profile",children:"My Profile"}),Object(h.jsx)(w.b,{to:"",onClick:t,class:"logout",children:"Logout"})]})})}function I(){return Object(h.jsxs)("div",{class:"icon",children:[Object(h.jsxs)("section",{children:[Object(h.jsx)("div",{class:"search_icon"}),Object(h.jsx)("p",{class:"icon_text",children:"Search for your perfect job by using key words or job title"})]}),Object(h.jsxs)("section",{children:[Object(h.jsx)("div",{class:"bookmark_icon"}),Object(h.jsx)("p",{class:"icon_text",children:"Easily bookmark and keep track of all the jobs you're interested in"})]})]})}function L(e){return fetch("/",{method:"POST",body:e,headers:{Authorization:"Bearer "+g.getToken()}}).then((function(e){return e.json()}))}function U(e){function t(){return(t=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(t);case 2:n=e.sent,console.log(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return console.log(e),Object(h.jsxs)("div",{class:"searchResults",children:[Object(h.jsx)("a",{href:e.job.redirect_url,children:Object(h.jsx)("h3",{children:e.job.title})}),Object(h.jsx)("h4",{children:e.job.category.label}),Object(h.jsx)("h4",{children:e.job.location.display_name}),Object(h.jsx)("p",{children:e.job.description}),Object(h.jsx)("button",{onClick:function(){console.log({redirect_url:e.job.redirect_url,title:e.job.title,label:e.job.category.label,location:e.job.location.display_name,description:e.job.description}),function(e){t.apply(this,arguments)}({redirect_url:e.job.redirect_url,title:e.job.title,label:e.job.category.label,location:e.job.location.display_name,description:e.job.description})},class:"bookmark_button",children:"Book Mark"})]})}function A(e){var t=e.jobs;e.searchResults;return Object(h.jsx)("div",{children:t.map((function(e){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(U,{job:e})})}))})}function F(e){var t=e.handleLogout,n=Object(a.useState)([]),r=Object(o.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(!0),l=Object(o.a)(i,2),j=l[0],u=l[1],b=Object(a.useState)(""),d=Object(o.a)(b,2),p=d[0],O=d[1],m=Object(a.useState)(""),x=Object(o.a)(m,2),f=x[0],g=x[1];return Object(a.useEffect)((function(){console.log(p,f,"this is the jobtitle and location");var e="https://api.adzuna.com/v1/api/jobs/us/search/1?app_id=3c28107a&app_key=b350f92eaecc52697e668c777ba06f6b&what_and=".concat(p,"&where=").concat(f,"&sort_by=relevance");fetch(e).then((function(e){return e.json()})).then((function(e){console.log("searchResults",e),s(e.results),u(!1)}))}),[p,f]),Object(h.jsxs)("body",{class:"home-body",children:[Object(h.jsxs)("div",{class:"background",children:[Object(h.jsx)(_,{handleLogout:t}),Object(h.jsx)("h1",{children:"...Your Perfect Job is Waiting"}),Object(h.jsx)(N,{handleFormSubmit:function(e,t){O(e),g(t)}})]}),j?null:Object(h.jsx)(A,{jobs:c}),Object(h.jsx)(I,{})]})}n(163);function J(e){var t=e.user;e.handleLogout;return Object(h.jsxs)("body",{class:"myprofile",children:[Object(h.jsx)(_,{}),Object(h.jsxs)(p.a,{textAlign:"center",columns:2,class:"profile",children:[Object(h.jsx)(p.a.Row,{children:Object(h.jsx)(p.a.Column,{style:{maxWidth:350},children:Object(h.jsx)(m.a,{children:Object(h.jsxs)("h3",{children:[t.firstName," ",t.lastName]})})})}),Object(h.jsx)(p.a.Row,{children:Object(h.jsx)(p.a.Column,{style:{maxWidth:350},children:Object(h.jsx)(m.a,{children:Object(h.jsx)("h5",{children:t.email})})})})]}),Object(h.jsx)("div",{children:Object(h.jsx)("h2",{children:"Book Marked Jobs:"})})]})}var q=function(){var e=Object(a.useState)(y.getUser()),t=Object(o.a)(e,2),n=t[0],r=t[1];function c(){r(y.getUser())}function i(){y.logout(),r({user:null})}return Object(h.jsx)("div",{className:"App",children:Object(h.jsxs)(s.d,{children:[Object(h.jsx)(s.b,{exact:!0,path:"/login",children:Object(h.jsx)(T,{handleSignUpOrLogin:c})}),Object(h.jsx)(s.b,{exact:!0,path:"/signup",children:Object(h.jsx)(k,{handleSignUpOrLogin:c})}),y.getUser()?Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(s.d,{children:[Object(h.jsx)(s.b,{exact:!0,path:"/",children:Object(h.jsx)(F,{user:n,handleLogout:i})}),Object(h.jsx)(s.b,{exact:!0,path:"/:username",children:Object(h.jsx)(J,{user:n,handleLogout:i})})]})}):Object(h.jsx)(s.a,{to:"/login"})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(h.jsx)(w.a,{children:Object(h.jsx)(q,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[164,1,2]]]);
//# sourceMappingURL=main.9bcfbdb6.chunk.js.map